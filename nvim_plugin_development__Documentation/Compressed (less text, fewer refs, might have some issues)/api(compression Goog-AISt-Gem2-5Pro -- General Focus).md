### Neovim API Reference (Condensed for Plugin Development)

**I. API Core Concepts**

| Category        | Topic                                            | Description                                                                                                                                                                                                                                                                                                                                         | NumHi Relevance                                                                                                                                                |
| --------------- | ------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| API Usage       | RPC ([api-rpc])                                  | Main programmatic control via MessagePack-RPC. Clients can call API, listen to events, receive remote calls. Nvim can embed via `jobstart()` with `rpc:v:true`. Communication constraints: responses in reverse order of requests; messages processed sequentially.                                                                                 | Low (NumHi is primarily an in-process Lua plugin)                                                                                                              |
| API Usage       | Connecting ([rpc-connecting])                    | `v:servername` for default RPC socket. `nvim --listen` for TCP/IP. `serverstart()`. Python example using `pynvim`. Embed Nvim via `jobstart()` with `rpcrequest()`.                                                                                                                                                                                 | Low                                                                                                                                                            |
| API Definitions | Basic Types ([api-types])                        | `Nil`, `Boolean`, `Integer` (int64_t), `Float` (double), `String` ({char\* data, size_t size}), `Array` (kvec), `Dict` (kvec, msgpack: map), `Object` (any). Empty Array accepted as Dict. Lua functions can be passed as parameters for non-RPC invocations.                                                                                       | `[NUMHI]` (String, Array, Dict, Boolean, Integer are fundamental for plugin logic, extmark data, notes, configuration, and inter-module communication)         |
| API Definitions | Special Types (msgpack EXT)                      | Integer typedefs for `Buffer` (bufnr), `Window` (window-ID), `Tabpage` (internal handle). Treated as opaque integers, mutually incompatible. EXT type codes are stable.                                                                                                                                                                             | `[NUMHI]` (Buffer and Window handles are essential for nearly all NumHi operations)                                                                            |
| API Definitions | Indexing ([api-indexing])                        | **Default**: 0-based, end-exclusive. -1 for last line/col in ranges. <br> **Mark-like**: 1-based lines, 0-based columns for `nvim_get_mark`, `nvim_buf_get_mark`, `nvim_buf_set_mark`, `nvim_win_get_cursor`, `nvim_win_set_cursor`. <br> **Extmarks**: 0-based indices, end-inclusive for extmark functions.                                       | `[NUMHI]` (Critical for all buffer operations, especially extmark positioning, highlight ranges, and note attachment logic)                                    |
| API Definitions | Fast Functions ([api-fast])                      | Most API funcs are "deferred" (queued on main loop). Non-deferred (fast) functions (e.g., `nvim_get_mode`, `nvim_input`) are served immediately. Lua: `vim.in_fast_event()`.                                                                                                                                                                        | Informational (Relevant for understanding performance and context, e.g., in autocommands)                                                                      |
| API Definitions | Metadata ([api-metadata])                        | Nvim exposes API metadata via `nvim_get_api_info()`, `nvim --api-info`, or `vim.fn.api_info()`. Contains `version`, `functions` (signatures, `since`, `deprecated_since`), `ui_events`, `ui_options`, `types`, `error_types`. Methods operating on Nvim types are prefixed `nvim_TYPE_` (e.g., `nvim_buf_get_lines`). Global functions are `nvim_`. | Low (for direct use by NumHi, but useful for developers building tools around Nvim or understanding API evolution)                                             |
| API Definitions | Contract ([api-contract])                        | New functions/events may be added (optional for old clients). Signatures stable after release (dev version may change). Events may add parameters. Maps/lists can add items. Deprecated functions not removed until Nvim 2.0. "Private" interfaces (`nvim__*`, undocumented) not covered.                                                           | Informational (Good for ensuring plugin forward-compatibility)                                                                                                 |
| Global Events   | `nvim_error_event`                               | `nvim_error_event[{type}, {message}]` sent to client if an async API request causes an error. `{type}` is numeric ID from `api_info().error_types`.                                                                                                                                                                                                 | Low (More relevant for RPC clients; Lua errors are typically handled directly)                                                                                 |
| Buffer Events   | `nvim_buf_attach()`                              | Subscribes to buffer updates. Events: `nvim_buf_lines_event`, `nvim_buf_changedtick_event`, `nvim_buf_detach_event`. Lua callbacks (`on_lines`, `on_changedtick`, `on_detach`, `on_reload`) can be used. See [api-buffer-updates-lua].                                                                                                              | `[NUMHI]` (Potentially for live updates or advanced persistence if highlights need to react to external changes, though current NumHi might rely on load/save) |
| Buffer Events   | `nvim_buf_lines_event`                           | `[{buf}, {changedtick}, {firstline}, {lastline}, {linedata}, {more}]`. Text change between `{firstline}` (0-indexed) and `{lastline}` (exclusive). `{linedata}` is new lines. `{more}` for multipart. If `{changedtick}` is `v:null`, screen lines changed (e.g. `inccommand`) but not buffer.                                                      | `[NUMHI]` (If using `nvim_buf_attach` for advanced features)                                                                                                   |
| Buffer Events   | `nvim_buf_changedtick_event`                     | `[{buf}, {changedtick}]`. `b:changedtick` incremented, no text change (undo/redo).                                                                                                                                                                                                                                                                  | `[NUMHI]` (If using `nvim_buf_attach`)                                                                                                                         |
| Buffer Events   | `nvim_buf_detach_event`                          | `[{buf}]`. Buffer detached (updates disabled). Triggered by `nvim_buf_detach()` or implicitly (buffer abandoned, reloaded).                                                                                                                                                                                                                         | `[NUMHI]` (If using `nvim_buf_attach`)                                                                                                                         |
| Highlights      | Buffer Highlighting ([api-highlights])           | Plugins add position-based highlights via [extmarks] (`nvim_buf_set_extmark`). Adapts to line changes. Manage as groups. Not preserved in files or undo/redo. For linters, semantic highlighters.                                                                                                                                                   | `[NUMHI]` (This is the core mechanism NumHi uses for its highlighting features)                                                                                |
| UI              | Floating Windows ([api-floatwin])                | Displayed on top of normal windows (tooltips, widgets). Created by `nvim_open_win()` or `nvim_win_set_config()`. Closed by `nvim_win_close()`. Check with `nvim_win_get_config().relative ~= ''`. Highlights: `hl-NormalFloat`, `hl-FloatBorder`, `hl-FloatTitle`, `hl-FloatFooter`. Use `winhighlight`. `style=minimal` for cleaner floats.        | `[NUMHI]` (Essential for NumHi's inline notes, pickers for colors/categories/navigation, and potentially S-Reader mode)                                        |
| Extmarks        | Extended Marks ([api-extended-marks], [extmark]) | Buffer annotations tracking text changes. Represent cursors, folds, highlights. Positioned _between_ characters (0-based). Max index on line = char count. Forward gravity by default. Not removed by deleting surrounding text (use `nvim_buf_del_extmark`). Namespaces isolate plugin marks. Restored on undo/redo.                               | `[NUMHI]` (The fundamental data structure for NumHi's highlights. All highlight operations rely on extmarks)                                                   |

**II. API Functions**

| Category       | Function Signature & `Since`                                                                         | Description                                                                                                                                                        | Attributes                         | Parameters (Name, Type, Description)                                                                                                                                                                                                                                                                                       | Return (Type, Description)                                                                                                                                                      | NumHi Relevance                                                                                                                                                                                                                 |
| -------------- | ---------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Global**     | `nvim_chan_send({chan}, {data})` `0.5.0`                                                             | Send raw data to channel (stdin for job, stdout for stdio, terminal output for internal term). Not for RPC messages.                                               | `[RPC] only`, `Lua [vim.api] only` | `{chan}` (integer): Channel ID.<br>`{data}` (string/binary): Data to write.                                                                                                                                                                                                                                                | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| Global         | `nvim_create_buf({listed}, {scratch})` `0.4.0`                                                       | Creates a new, empty, unnamed buffer.                                                                                                                              |                                    | `{listed}` (boolean): Sets 'buflisted'.<br>`{scratch}` (boolean): Creates a [scratch-buffer], sets 'nomodeline'.                                                                                                                                                                                                           | Buffer ID (integer), or 0 on error.                                                                                                                                             | `[NUMHI]` (Critical for creating temporary buffers for notes, ensuring they are scratch and potentially unlisted. Used in `core.lua` for note editing.)                                                                         |
| Global         | `nvim_del_current_line()` `0.1.0`                                                                    | Deletes the current line.                                                                                                                                          | `not textlock`                     | None                                                                                                                                                                                                                                                                                                                       | None                                                                                                                                                                            | Medium (Could be used in note editor, but direct buffer manipulation is more likely)                                                                                                                                            |
| Global         | `nvim_del_keymap({mode}, {lhs})` `0.4.0`                                                             | Unmaps a global mapping. For buffer-local, use `nvim_buf_del_keymap()`.                                                                                            |                                    | `{mode}` (string): Mode short-name.<br>`{lhs}` (string): Left-hand-side of mapping.                                                                                                                                                                                                                                        | None                                                                                                                                                                            | `[NUMHI]` (To allow users to unmap default NumHi global keybindings if needed)                                                                                                                                                  |
| Global         | `nvim_del_mark({name})` `0.6.0`                                                                      | Deletes an uppercase/file named mark. Error for lowercase/buffer-local.                                                                                            |                                    | `{name}` (string): Mark name.                                                                                                                                                                                                                                                                                              | `true` if deleted, else `false`.                                                                                                                                                | Low (NumHi focuses on extmarks, not standard Vim marks)                                                                                                                                                                         |
| Global         | `nvim_del_var({name})` `0.1.0`                                                                       | Removes a global (g:) variable.                                                                                                                                    |                                    | `{name}` (string): Variable name.                                                                                                                                                                                                                                                                                          | None                                                                                                                                                                            | Medium (If NumHi uses global vars for some state, though module state is preferred)                                                                                                                                             |
| Global         | `nvim_echo({chunks}, {history}, {opts})` `0.5.0`                                                     | Prints a message given by `[text, hl_group]` "chunks".                                                                                                             |                                    | `{chunks}` (array): List of `[text, hl_group]` pairs.<br>`{history}` (boolean): Add to message-history.<br>`{opts}` (dict): `err` (boolean), `kind` (string), `verbose` (boolean).                                                                                                                                         | None                                                                                                                                                                            | `[NUMHI]` (Essential for providing feedback: palette changes, highlight info on hover/cursor, error messages, label prompts. Used in `core.lua` for palette cycling and hover labels.)                                          |
| Global         | `nvim_eval_statusline({str}, {opts})` `0.6.0`                                                        | Evaluates statusline string.                                                                                                                                       | `[api-fast]`                       | `{str}` (string): Statusline string.<br>`{opts}` (dict): `winid`, `maxwidth`, `fillchar`, `highlights`, `use_winbar`, `use_tabline`, `use_statuscol_lnum`.                                                                                                                                                                 | Dict: `{str, width, highlights}`.                                                                                                                                               | `[NUMHI]` (If NumHi needs to dynamically generate or parse statusline components, relevant to its statusline feature.)                                                                                                          |
| Global         | `nvim_exec_lua({code}, {args})` `0.5.0`                                                              | Execute Lua code. Params available as `...`. Can return a value. Prefix expression with `return`.                                                                  | `[RPC] only`                       | `{code}` (string): Lua code.<br>`{args}` (array): Arguments to the code.                                                                                                                                                                                                                                                   | Return value of Lua code or `NIL`.                                                                                                                                              | Medium (Can be used to dynamically execute Lua strings, but direct Lua calls are more common within a plugin)                                                                                                                   |
| Global         | `nvim_feedkeys({keys}, {mode}, {escape_ks})` `0.1.0`                                                 | Sends input-keys to Nvim (blocking). Use `nvim_replace_termcodes()` for keycodes like `<C-o>`.                                                                     |                                    | `{keys}` (string): Keys to type.<br>`{mode}` (string): Behavior flags (see `feedkeys()`).<br>`{escape_ks}` (boolean): Escape K_SPECIAL bytes.                                                                                                                                                                              | None                                                                                                                                                                            | Medium (Can be used for complex interactions or to trigger built-in actions as part of a NumHi command, e.g., exiting visual mode after highlighting. Used in `core.lua`.)                                                      |
| Global         | `nvim_get_api_info()` `0.1.0`                                                                        | Returns `[{channel-id}, {api-metadata}]`.                                                                                                                          | `[api-fast]`, `[RPC] only`         | None                                                                                                                                                                                                                                                                                                                       | 2-tuple `[{channel-id}, {api-metadata}]`.                                                                                                                                       | Low (Primarily for RPC client developers)                                                                                                                                                                                       |
| Global         | `nvim_get_chan_info({chan})` `0.3.0`                                                                 | Gets information about a channel.                                                                                                                                  |                                    | `{chan}` (integer): Channel ID, or 0 for current.                                                                                                                                                                                                                                                                          | Channel info dict.                                                                                                                                                              | Low                                                                                                                                                                                                                             |
| Global         | `nvim_get_color_by_name({name})` `0.1.0`                                                             | Returns 24-bit RGB value of a color name or "#rrggbb" string.                                                                                                      |                                    | `{name}` (string): Color name or hex string.                                                                                                                                                                                                                                                                               | 24-bit RGB value (integer), or -1.                                                                                                                                              | Medium (Potentially for palette color validation or conversion if needed, though NumHi palettes seem hex-based)                                                                                                                 |
| Global         | `nvim_get_color_map()` `0.1.0`                                                                       | Returns a map of color names and RGB values.                                                                                                                       |                                    | None                                                                                                                                                                                                                                                                                                                       | Map of color names to RGB values.                                                                                                                                               | Low                                                                                                                                                                                                                             |
| Global         | `nvim_get_context({opts})` `0.4.0`                                                                   | Gets a map of the current editor state.                                                                                                                            |                                    | `{opts}` (dict): `types` (list of [context-types] or empty for "all").                                                                                                                                                                                                                                                     | Map of global [context].                                                                                                                                                        | Medium (Could be useful for saving/restoring complex states, but less direct for core NumHi features)                                                                                                                           |
| Global         | `nvim_get_current_buf()` `0.1.0`                                                                     | Gets the current buffer.                                                                                                                                           |                                    | None                                                                                                                                                                                                                                                                                                                       | Buffer ID (integer).                                                                                                                                                            | `[NUMHI]` (Essential for almost all buffer-specific operations like getting/setting extmarks, lines, options. Used extensively.)                                                                                                |
| Global         | `nvim_get_current_line()` `0.1.0`                                                                    | Gets the current line.                                                                                                                                             |                                    | None                                                                                                                                                                                                                                                                                                                       | Current line string.                                                                                                                                                            | `[NUMHI]` (Useful for context, default highlight range (word under cursor), or displaying info. Used in `core.lua` for word range.)                                                                                             |
| Global         | `nvim_get_current_tabpage()` `0.1.0`                                                                 | Gets the current tabpage.                                                                                                                                          |                                    | None                                                                                                                                                                                                                                                                                                                       | Tabpage ID (integer).                                                                                                                                                           | Low (NumHi operations are mostly buffer/window-centric)                                                                                                                                                                         |
| Global         | `nvim_get_current_win()` `0.1.0`                                                                     | Gets the current window.                                                                                                                                           |                                    | None                                                                                                                                                                                                                                                                                                                       | Window ID (integer).                                                                                                                                                            | `[NUMHI]` (Essential for operations relative to the current window, like opening floating windows, getting cursor position.)                                                                                                    |
| Global         | `nvim_get_hl({ns_id}, {opts})` `0.9.0`                                                               | Gets all or specific highlight groups in a namespace.                                                                                                              |                                    | `{ns_id}` (integer): Namespace ID (0 for global).<br>`{opts}` (dict): `name` (string), `id` (integer), `link` (boolean, default true), `create` (boolean, default true).                                                                                                                                                   | Map of group name to highlight definition, or single definition if by name/id.                                                                                                  | `[NUMHI]` (Useful for inspecting existing highlight groups, potentially for NumHi's statusline or ensuring palette colors don't clash with theme.)                                                                              |
| Global         | `nvim_get_hl_id_by_name({name})` `0.5.0`                                                             | Gets a highlight group ID by name, allocates if not present.                                                                                                       |                                    | `{name}` (string): Highlight group name.                                                                                                                                                                                                                                                                                   | Highlight group ID (integer).                                                                                                                                                   | `[NUMHI]` (Crucial for associating highlight group IDs with extmarks. This is how NumHi's palette colors are referenced programmatically. `ensure_hl` in `core.lua` effectively uses this idea.)                                |
| Global         | `nvim_get_hl_ns({opts})` `0.10.0`                                                                    | Gets the active highlight namespace.                                                                                                                               |                                    | `{opts}` (dict): `winid` (integer).                                                                                                                                                                                                                                                                                        | Namespace ID (integer), or -1.                                                                                                                                                  | Medium (If NumHi needs to be aware of or interact with the window's active highlight namespace)                                                                                                                                 |
| Global         | `nvim_get_keymap({mode})` `0.2.1`                                                                    | Gets a list of global (non-buffer-local) mapping definitions.                                                                                                      |                                    | `{mode}` (string): Mode short-name.                                                                                                                                                                                                                                                                                        | Array of maparg()-like dictionaries.                                                                                                                                            | Medium (For introspection or advanced keymap management)                                                                                                                                                                        |
| Global         | `nvim_get_mark({name}, {opts})` `0.6.0`                                                              | Returns `(row, col, buffer, buffername)` of uppercase/file mark. (1,0)-indexed.                                                                                    |                                    | `{name}` (string): Mark name.<br>`{opts}` (dict): Reserved.                                                                                                                                                                                                                                                                | 4-tuple (row, col, buffer, buffername), or (0,0,0,'') if not set.                                                                                                               | Low (NumHi uses extmarks)                                                                                                                                                                                                       |
| Global         | `nvim_get_mode()` `0.2.0`                                                                            | Gets current mode. `blocking` is true if Nvim waits for input.                                                                                                     | `[api-fast]`                       | None                                                                                                                                                                                                                                                                                                                       | Dict: `{ "mode": String, "blocking": Boolean }`.                                                                                                                                | `[NUMHI]` (Helpful for context-sensitive actions, e.g. default highlight behavior in normal vs visual mode. Used in `core.lua`.)                                                                                                |
| Global         | `nvim_get_proc({pid})` `0.3.0`                                                                       | Gets info describing process `pid`.                                                                                                                                |                                    | `{pid}` (integer): Process ID.                                                                                                                                                                                                                                                                                             | Map of process properties, or NIL if not found.                                                                                                                                 | Low                                                                                                                                                                                                                             |
| Global         | `nvim_get_proc_children({pid})` `0.3.0`                                                              | Gets immediate children of process `pid`.                                                                                                                          |                                    | `{pid}` (integer): Process ID.                                                                                                                                                                                                                                                                                             | Array of child process IDs.                                                                                                                                                     | Low                                                                                                                                                                                                                             |
| Global         | `nvim_get_runtime_file({name}, {all})` `0.5.0`                                                       | Finds files in 'runtimepath'. `name` can have wildcards.                                                                                                           | `[api-fast]`                       | `{name}` (string): File pattern.<br>`{all}` (boolean): Return all matches or first.                                                                                                                                                                                                                                        | List of absolute file paths.                                                                                                                                                    | Medium (Could be used for loading default configs or templates if NumHi ships with them)                                                                                                                                        |
| Global         | `nvim_get_var({name})` `0.1.0`                                                                       | Gets a global (g:) variable.                                                                                                                                       |                                    | `{name}` (string): Variable name.                                                                                                                                                                                                                                                                                          | Variable value.                                                                                                                                                                 | Medium (If NumHi uses global vars for configuration or state, though module state/opts preferred)                                                                                                                               |
| Global         | `nvim_get_vvar({name})` `0.1.0`                                                                      | Gets a v: variable.                                                                                                                                                |                                    | `{name}` (string): Variable name.                                                                                                                                                                                                                                                                                          | Variable value.                                                                                                                                                                 | Medium (For accessing Vim's internal state variables if needed)                                                                                                                                                                 |
| Global         | `nvim_input({keys})` `0.1.0`                                                                         | Queues raw user-input (non-blocking). `<CR>` translated, use `<LT>` for literal '<'. For mouse, `nvim_input_mouse()`. Prefer `nvim_paste()` for text blocks.       | `[api-fast]`                       | `{keys}` (string): Keys to type.                                                                                                                                                                                                                                                                                           | Number of bytes written.                                                                                                                                                        | Medium (Less direct use than `nvim_feedkeys` for scripting complex actions within NumHi)                                                                                                                                        |
| Global         | `nvim_input_mouse(...)` `0.4.0`                                                                      | Send mouse event from GUI (non-blocking). For real-time mouse input.                                                                                               | `[api-fast]`                       | `{button}` (string), `{action}` (string), `{modifier}` (string), `{grid}` (integer), `{row}` (integer), `{col}` (integer).                                                                                                                                                                                                 | None                                                                                                                                                                            | Low (NumHi is primarily keyboard-driven)                                                                                                                                                                                        |
| Global         | `nvim_list_bufs()` `0.1.0`                                                                           | Gets current list of all buffer IDs (incl. unlisted). Use `nvim_buf_is_loaded()` to check.                                                                         |                                    | None                                                                                                                                                                                                                                                                                                                       | List of buffer IDs (integer).                                                                                                                                                   | `[NUMHI]` (Potentially for a global list of highlights across all buffers in `:NumHiList` picker)                                                                                                                               |
| Global         | `nvim_list_chans()` `0.3.0`                                                                          | Get info about all open channels.                                                                                                                                  |                                    | None                                                                                                                                                                                                                                                                                                                       | Array of channel Dictionaries.                                                                                                                                                  | Low                                                                                                                                                                                                                             |
| Global         | `nvim_list_runtime_paths()` `0.1.0`                                                                  | Gets paths in [runtime-search-path].                                                                                                                               |                                    | None                                                                                                                                                                                                                                                                                                                       | List of paths.                                                                                                                                                                  | Low                                                                                                                                                                                                                             |
| Global         | `nvim_list_tabpages()` `0.1.0`                                                                       | Gets current list of tabpage IDs.                                                                                                                                  |                                    | None                                                                                                                                                                                                                                                                                                                       | List of tabpage IDs (integer).                                                                                                                                                  | Low (NumHi is mostly buffer/window centric)                                                                                                                                                                                     |
| Global         | `nvim_list_uis()` `0.3.0`                                                                            | Gets a list of dictionaries for attached UIs.                                                                                                                      |                                    | None                                                                                                                                                                                                                                                                                                                       | Array of UI dictionaries.                                                                                                                                                       | Low                                                                                                                                                                                                                             |
| Global         | `nvim_list_wins()` `0.1.0`                                                                           | Gets current list of all window IDs in all tabpages.                                                                                                               |                                    | None                                                                                                                                                                                                                                                                                                                       | List of window IDs (integer).                                                                                                                                                   | `[NUMHI]` (Useful for managing floating windows, e.g., ensuring only one note window or picker is open, or finding a suitable window for a float)                                                                               |
| Global         | `nvim_load_context({dict})` `0.4.0`                                                                  | Sets current editor state from [context] map.                                                                                                                      |                                    | `{dict}` (dict): Context map.                                                                                                                                                                                                                                                                                              | None                                                                                                                                                                            | Low (Complex state management, less direct for NumHi)                                                                                                                                                                           |
| Global         | `nvim_open_term({buffer}, {opts})` `0.5.0`                                                           | Open a terminal instance in a buffer (not connected to external process by default). Input on channel echoed by terminal.                                          | `not textlock`                     | `{buffer}` (integer): Buffer to use.<br>`{opts}` (dict): `on_input` (Lua callback), `force_crlf` (boolean).                                                                                                                                                                                                                | Channel ID (integer), or 0 on error.                                                                                                                                            | Low (NumHi doesn't involve terminals)                                                                                                                                                                                           |
| Global         | `nvim_paste({data}, {crlf}, {phase})` `0.4.0`                                                        | Pastes at cursor (any mode), sets "redo" for dot-repeat. For scripts to input large, dot-repeatable text blocks. Invokes `vim.paste()`.                            | `not textlock`                     | `{data}` (string): Multiline input.<br>`{crlf}` (boolean): Break lines at CR/CRLF.<br>`{phase}` (integer): -1 for single call; 1 (start), 2 (continue), 3 (end) for streaming.                                                                                                                                             | `true` to continue, `false` to cancel.                                                                                                                                          | Medium (Could be used to programmatically insert template text into notes)                                                                                                                                                      |
| Global         | `nvim_put({lines}, {type}, {after}, {follow})` `0.4.0`                                               | Puts text at cursor (any mode). Not for dot-repeat (use `nvim_paste`).                                                                                             | `not textlock`                     | `{lines}` (array): readfile()-style list of lines.<br>`{type}` (string): Edit behavior ("b", "c", "l", "").<br>`{after}` (boolean): Insert after/before cursor.<br>`{follow}` (boolean): Place cursor at end.                                                                                                              | None                                                                                                                                                                            | `[NUMHI]` (Could be used to insert text into note buffers if more direct control than `nvim_buf_set_lines/text` is needed, or for specific formatting)                                                                          |
| Global         | `nvim_replace_termcodes({str}, {from_part}, {do_lt}, {special})` `0.1.0`                             | Replaces terminal codes and keycodes (`<CR>`, `<Esc>`) in string with internal representation.                                                                     |                                    | `{str}` (string).<br>`{from_part}` (boolean).<br>`{do_lt}` (boolean).<br>`{special}` (boolean).                                                                                                                                                                                                                            | Converted string.                                                                                                                                                               | `[NUMHI]` (Important if using `nvim_feedkeys` with special key sequences for NumHi keybindings or actions. Used in `init.lua` and `core.lua` for `nvim_feedkeys` `<Esc>`.)                                                      |
| Global         | `nvim_select_popupmenu_item(...)` `0.4.0`                                                            | Selects an item in completion popup menu.                                                                                                                          |                                    | `{item}` (integer), `{insert}` (boolean), `{finish}` (boolean), `{opts}` (dict).                                                                                                                                                                                                                                           | None                                                                                                                                                                            | Low (NumHi pickers are custom floats, not std completion popup)                                                                                                                                                                 |
| Global         | `nvim_set_client_info(...)` `0.3.0`                                                                  | Self-identifies client. Sets `client` object for `nvim_get_chan_info()`.                                                                                           | `[RPC] only`                       | `{name}` (string), `{version}` (dict), `{type}` (string), `{methods}` (dict), `{attributes}` (dict).                                                                                                                                                                                                                       | None                                                                                                                                                                            | Low (For RPC clients)                                                                                                                                                                                                           |
| Global         | `nvim_set_current_buf({buffer})` `0.1.0`                                                             | Sets current window's buffer.                                                                                                                                      | `not textlock`, `not cmdwin`       | `{buffer}` (integer): Buffer ID.                                                                                                                                                                                                                                                                                           | None                                                                                                                                                                            | `[NUMHI]` (Can be used to switch to a note buffer if it's in a persistent window, or for utility functions operating on a specific buffer temporarily made current)                                                             |
| Global         | `nvim_set_current_dir({dir})` `0.1.0`                                                                | Changes global working directory.                                                                                                                                  |                                    | `{dir}` (string): Directory path.                                                                                                                                                                                                                                                                                          | None                                                                                                                                                                            | Low (NumHi's data storage is relative to file or project, not CWD dependent)                                                                                                                                                    |
| Global         | `nvim_set_current_line({line})` `0.1.0`                                                              | Sets text on current line.                                                                                                                                         | `not textlock`                     | `{line}` (string): Line contents.                                                                                                                                                                                                                                                                                          | None                                                                                                                                                                            | Medium (Could be used in note editor, but `nvim_buf_set_lines` is more versatile)                                                                                                                                               |
| Global         | `nvim_set_current_tabpage({tabpage})` `0.1.0`                                                        | Sets current tabpage.                                                                                                                                              | `not textlock`, `not cmdwin`       | `{tabpage}` (integer): Tabpage ID.                                                                                                                                                                                                                                                                                         | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| Global         | `nvim_set_current_win({window})` `0.1.0`                                                             | Sets current window (and tabpage implicitly).                                                                                                                      | `not textlock`, `not cmdwin`       | `{window}` (integer): Window ID.                                                                                                                                                                                                                                                                                           | None                                                                                                                                                                            | `[NUMHI]` (Useful for focusing a floating note window or picker after creation or for interaction.)                                                                                                                             |
| Global         | `nvim_set_hl({ns_id}, {name}, {val})` `0.5.0`                                                        | Sets/replaces a highlight group. `fg`/`bg` can be "fg"/"bg" (Normal aliases). `link` overrides others.                                                             |                                    | `{ns_id}` (integer): Namespace ID (0 for global).<br>`{name}` (string): Group name.<br>`{val}` (dict): `fg`, `bg`, `sp`, `blend`, `bold`, `underline`, etc., `link`, `default`, `ctermfg`, `ctermbg`, `cterm`, `force`.                                                                                                    | None                                                                                                                                                                            | `[NUMHI]` (Core for defining NumHi's color palettes. Each color slot `NumHi_Palette_Slot` will be defined using this. Used in `core.lua`'s `ensure_hl`.)                                                                        |
| Global         | `nvim_set_hl_ns({ns_id})` `0.8.0`                                                                    | Set active highlight namespace globally. For window-specific, `nvim_win_set_hl_ns()`.                                                                              |                                    | `{ns_id}` (integer): Namespace ID.                                                                                                                                                                                                                                                                                         | None                                                                                                                                                                            | Medium (NumHi might use its own namespace for its highlights to avoid conflicts, then activate it)                                                                                                                              |
| Global         | `nvim_set_hl_ns_fast({ns_id})` `0.8.0`                                                               | Set active highlight namespace during redrawing (e.g., from decoration provider callbacks).                                                                        | `[api-fast]`                       | `{ns_id}` (integer): Namespace ID.                                                                                                                                                                                                                                                                                         | None                                                                                                                                                                            | Medium (Relevant if NumHi uses `nvim_set_decoration_provider` for dynamic effects like S-Reader)                                                                                                                                |
| Global         | `nvim_set_keymap({mode}, {lhs}, {rhs}, {opts})` `0.4.0`                                              | Sets a global mapping. Empty `{rhs}` is `<Nop>`. Keycodes replaced.                                                                                                |                                    | `{mode}` (string).<br>`{lhs}` (string).<br>`{rhs}` (string).<br>`{opts}` (dict): `noremap`, `desc`, `callback`, `replace_keycodes`, and [:map-arguments] as booleans.                                                                                                                                                      | None                                                                                                                                                                            | `[NUMHI]` (Essential for defining NumHi's global user-facing keybindings, like cycling palettes, toggling UI. Used in `init.lua`.)                                                                                              |
| Global         | `nvim_set_var({name}, {value})` `0.1.0`                                                              | Sets a global (g:) variable.                                                                                                                                       |                                    | `{name}` (string): Variable name.<br>`{value}` (any): Variable value.                                                                                                                                                                                                                                                      | None                                                                                                                                                                            | Medium (If NumHi needs global configuration flags accessible via `g:numhi_...`)                                                                                                                                                 |
| Global         | `nvim_set_vvar({name}, {value})` `0.4.0`                                                             | Sets a v: variable (if not readonly).                                                                                                                              |                                    | `{name}` (string): Variable name.<br>`{value}` (any): Variable value.                                                                                                                                                                                                                                                      | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| Global         | `nvim_strwidth({text})` `0.1.0`                                                                      | Calculates display cells for `text`. Control chars (Tab) count as 1.                                                                                               |                                    | `{text}` (string): Text.                                                                                                                                                                                                                                                                                                   | Number of cells (integer).                                                                                                                                                      | Medium (Potentially for UI calculations in floating windows/pickers to align elements)                                                                                                                                          |
| **Vimscript**  | `nvim_call_dict_function({dict}, {fn}, {args})` `0.3.0`                                              | Calls a Vimscript Dictionary-function.                                                                                                                             |                                    | `{dict}` (dict                                                                                                                                                                                                                                                                                                             | string): Dict or string evaluating to self dict.<br>`{fn}` (string): Function name.<br>`{args}` (array): Arguments.                                                             | Result of function call.                                                                                                                                                                                                        | Medium (If NumHi needs to interoperate with older Vimscript plugin dict functions)                                                                                                                                                                                     |
| Vimscript      | `nvim_call_function({fn}, {args})` `0.1.0`                                                           | Calls a Vimscript function.                                                                                                                                        |                                    | `{fn}` (string): Function name.<br>`{args}` (array): Arguments.                                                                                                                                                                                                                                                            | Result of function call.                                                                                                                                                        | `[NUMHI]` (Useful for calling built-in Vim functions like `vim.fn.input()`, `vim.fn.confirm()`, `vim.fn.expand()`, `vim.fn.line()`, `vim.fn.getpos()`. Used in `core.lua` and `init.lua`.)                                      |
| Vimscript      | `nvim_command({command})` `0.1.0`                                                                    | Executes an Ex command string. Prefer `nvim_cmd()` or `nvim_exec2()`.                                                                                              |                                    | `{command}` (string): Ex command.                                                                                                                                                                                                                                                                                          | None                                                                                                                                                                            | Medium (For simple Ex commands; `nvim_cmd` or Lua functions are often better for plugin logic)                                                                                                                                  |
| Vimscript      | `nvim_eval({expr})` `0.1.0`                                                                          | Evaluates a Vimscript expression. Dicts/Lists recursively expanded.                                                                                                |                                    | `{expr}` (string): Vimscript expression.                                                                                                                                                                                                                                                                                   | Evaluation result.                                                                                                                                                              | `[NUMHI]` (To get VimL option values, evaluate simple expressions, or access VimL variables not covered by `nvim_get_var/vvar`. Used in `init.lua`'s statusline attachment logic.)                                              |
| Vimscript      | `nvim_exec2({src}, {opts})` `0.9.0`                                                                  | Executes Vimscript (multiline block), like anonymous `:source`. Supports heredocs, s:, etc.                                                                        |                                    | `{src}` (string): Vimscript code.<br>`{opts}` (dict): `output` (boolean).                                                                                                                                                                                                                                                  | Dict: `{output: string                                                                                                                                                          | nil}`.                                                                                                                                                                                                                          | Medium (More powerful than `nvim_command` for complex Vimscript execution)                                                                                                                                                                                             |
| Vimscript      | `nvim_parse_expression({expr}, {flags}, {highlight})` `0.3.0`                                        | Parse a Vimscript expression. Returns AST.                                                                                                                         | `[api-fast]`                       | `{expr}` (string).<br>`{flags}` (string: "m", "E", "l", "lm").<br>`{highlight}` (boolean).                                                                                                                                                                                                                                 | AST (dict) with "error" or "ast".                                                                                                                                               | Low (Highly specialized)                                                                                                                                                                                                        |
| **Command**    | `nvim_buf_create_user_command({buffer}, {name}, {command}, {opts})` `0.7.0`                          | Creates a buffer-local user command.                                                                                                                               |                                    | `{buffer}` (integer): Buffer ID (0 for current).<br>`{name}` (string).<br>`{command}` (string                                                                                                                                                                                                                              | function).<br>`{opts}` (dict): See `nvim_create_user_command`.                                                                                                                  | None                                                                                                                                                                                                                            | `[NUMHI]` (If NumHi needs commands specific to certain buffer types, e.g., the note buffer)                                                                                                                                                                            |
| Command        | `nvim_buf_del_user_command({buffer}, {name})` `0.7.0`                                                | Deletes a buffer-local user command.                                                                                                                               |                                    | `{buffer}` (integer): Buffer ID (0 for current).<br>`{name}` (string).                                                                                                                                                                                                                                                     | None                                                                                                                                                                            | Medium                                                                                                                                                                                                                          |
| Command        | `nvim_buf_get_commands({buffer}, {opts})` `0.3.0`                                                    | Gets a map of buffer-local user commands.                                                                                                                          |                                    | `{buffer}` (integer): Buffer ID (0 for current).<br>`{opts}` (dict): Unused.                                                                                                                                                                                                                                               | Map of command maps.                                                                                                                                                            | Medium                                                                                                                                                                                                                          |
| Command        | `nvim_cmd({cmd}, {opts})` `0.8.0`                                                                    | Executes an Ex command from a structured Dict (like `nvim_parse_cmd` output). Allows spaces in args, filename expansion. Args can be Num/Bool/Str.                 |                                    | `{cmd}` (dict): Command structure.<br>`{opts}` (dict): `output` (boolean).                                                                                                                                                                                                                                                 | Command output (string) if `opts.output`, else empty.                                                                                                                           | `[NUMHI]` (A more robust way to execute Ex commands programmatically than `nvim_command`, useful for constructing complex commands for export or other actions)                                                                 |
| Command        | `nvim_create_user_command({name}, {command}, {opts})` `0.7.0`                                        | Creates a global user command. `command` can be Lua fn or string. Lua fn receives table arg with context.                                                          |                                    | `{name}` (string): Uppercase start.<br>`{command}` (string                                                                                                                                                                                                                                                                 | function).<br>`{opts}` (dict): `bang`, `bar`, `complete` (can be Lua fn), `desc`, `force`, `preview`, etc. and standard [command-attributes].                                   | None                                                                                                                                                                                                                            | `[NUMHI]` (For creating main user-facing commands like `:NumHiHighlight`, `:NumHiList`, `:NumHiExport`)                                                                                                                                                                |
| Command        | `nvim_del_user_command({name})` `0.7.0`                                                              | Deletes a user-defined command.                                                                                                                                    |                                    | `{name}` (string).                                                                                                                                                                                                                                                                                                         | None                                                                                                                                                                            | Medium                                                                                                                                                                                                                          |
| Command        | `nvim_get_commands({opts})` `0.3.0`                                                                  | Gets a map of global user commands.                                                                                                                                |                                    | `{opts}` (dict): `{"builtin":false}`.                                                                                                                                                                                                                                                                                      | Map of command maps.                                                                                                                                                            | Medium                                                                                                                                                                                                                          |
| Command        | `nvim_parse_cmd({str}, {opts})` `0.8.0`                                                              | Parse command line string into a structured Dict.                                                                                                                  | `[api-fast]`                       | `{str}` (string).<br>`{opts}` (dict): Reserved.                                                                                                                                                                                                                                                                            | Dict with `cmd`, `range`, `count`, `reg`, `bang`, `args`, `addr`, `nargs`, `nextcmd`, `magic`, `mods`.                                                                          | Medium (Useful for pre-processing commands if NumHi allows user-defined command strings that need parsing)                                                                                                                      |
| **Options**    | `nvim_get_all_options_info()` `0.5.0`                                                                | Gets option information for all options.                                                                                                                           |                                    | None                                                                                                                                                                                                                                                                                                                       | Dict of option names to metadata dicts.                                                                                                                                         | Medium (For comprehensive option introspection)                                                                                                                                                                                 |
| Options        | `nvim_get_option_info2({name}, {opts})` `0.9.0`                                                      | Gets option information for one option (global, buffer, or window).                                                                                                |                                    | `{name}` (string).<br>`{opts}` (dict): `scope` ("global"                                                                                                                                                                                                                                                                   | "local"), `win` (ID), `buf` (number).                                                                                                                                           | Option info dict: `name`, `shortname`, `type`, `default`, `was_set`, `last_set_sid`, etc.                                                                                                                                       | `[NUMHI]` (To check properties of options like `'filetype'` or NumHi's own settings if they were Vim options)                                                                                                                                                          |
| Options        | `nvim_get_option_value({name}, {opts})` `0.7.0`                                                      | Gets option value (local if exists, else global).                                                                                                                  |                                    | `{name}` (string).<br>`{opts}` (dict): `scope` ("global"                                                                                                                                                                                                                                                                   | "local"), `win` (ID), `buf` (number), `filetype` (string).                                                                                                                      | Option value.                                                                                                                                                                                                                   | `[NUMHI]` (Essential for reading NumHi's configuration options and Neovim options affecting UI/behavior, like `vim.o.columns`, `vim.o.lines`, `vim.opt.updatetime`. Used in `core.lua` and `init.lua`.)                                                                |
| Options        | `nvim_set_option_value({name}, {value}, {opts})` `0.7.0`                                             | Sets option value (global and local for global-local, unless `scope`).                                                                                             |                                    | `{name}` (string).<br>`{value}` (any).<br>`{opts}` (dict): `scope` ("global"                                                                                                                                                                                                                                               | "local"), `win` (ID), `buf` (number).                                                                                                                                           | None                                                                                                                                                                                                                            | `[NUMHI]` (Crucial for setting options, e.g., `filetype="markdown"` for the note buffer, or `updatetime` for hover. Used in `core.lua` (note buffer) and `init.lua` (`updatetime`).)                                                                                   |
| **Buffer**     | `nvim_buf_attach({buffer}, {send_buffer}, {opts})` `0.3.0`                                           | Activates buffer-update events (channel or Lua callbacks).                                                                                                         |                                    | `{buffer}` (integer).<br>`{send_buffer}` (boolean).<br>`{opts}` (dict): `on_lines`, `on_bytes`, `on_changedtick`, `on_detach`, `on_reload` (Lua callbacks), `utf_sizes`, `preview`.                                                                                                                                        | `false` if attach failed, else `true`.                                                                                                                                          | `[NUMHI]` (Potentially for real-time persistence or reacting to external file changes if highlights need to be very dynamic. The current NumHi approach might favor load/save on buffer events.)                                |
| Buffer         | `nvim_buf_call({buffer}, {fun})` `0.5.0`                                                             | Call Lua function with buffer as temporary current buffer.                                                                                                         | `Lua [vim.api] only`               | `{buffer}` (integer).<br>`{fun}` (function).                                                                                                                                                                                                                                                                               | Return value of function.                                                                                                                                                       | `[NUMHI]` (Useful if a utility function needs to operate in the context of a specific buffer, like a note buffer, without permanently switching the user's view.)                                                               |
| Buffer         | `nvim_buf_del_keymap({buffer}, {mode}, {lhs})` `0.4.0`                                               | Unmaps a buffer-local mapping.                                                                                                                                     |                                    | `{buffer}` (integer).<br>`{mode}` (string).<br>`{lhs}` (string).                                                                                                                                                                                                                                                           | None                                                                                                                                                                            | `[NUMHI]` (If NumHi sets buffer-local keymaps, e.g., in the note window, and needs to remove them.)                                                                                                                             |
| Buffer         | `nvim_buf_del_mark({buffer}, {name})` `0.6.0`                                                        | Deletes a named mark in the buffer.                                                                                                                                |                                    | `{buffer}` (integer).<br>`{name}` (string).                                                                                                                                                                                                                                                                                | `true` if deleted, else `false`.                                                                                                                                                | Low (NumHi uses extmarks)                                                                                                                                                                                                       |
| Buffer         | `nvim_buf_del_var({buffer}, {name})` `0.1.0`                                                         | Removes a buffer-scoped (b:) variable.                                                                                                                             |                                    | `{buffer}` (integer).<br>`{name}` (string).                                                                                                                                                                                                                                                                                | None                                                                                                                                                                            | Medium (If NumHi uses b:vars for buffer-specific state)                                                                                                                                                                         |
| Buffer         | `nvim_buf_delete({buffer}, {opts})` `0.5.0`                                                          | Deletes a buffer and its metadata.                                                                                                                                 | `not textlock`, `not cmdwin`       | `{buffer}` (integer).<br>`{opts}` (dict): `force` (boolean), `unload` (boolean).                                                                                                                                                                                                                                           | None                                                                                                                                                                            | `[NUMHI]` (For cleaning up temporary/scratch buffers like note windows when they are no longer needed, especially with `force=true`.)                                                                                           |
| Buffer         | `nvim_buf_detach({buffer})` `0.3.0`                                                                  | Deactivates buffer-update events on channel.                                                                                                                       | `[RPC] only`                       | `{buffer}` (integer).                                                                                                                                                                                                                                                                                                      | `false` if detach failed, else `true`.                                                                                                                                          | Medium (Counterpart to `nvim_buf_attach`)                                                                                                                                                                                       |
| Buffer         | `nvim_buf_get_changedtick({buffer})` `0.2.0`                                                         | Gets `b:changedtick` of a buffer.                                                                                                                                  |                                    | `{buffer}` (integer).                                                                                                                                                                                                                                                                                                      | `b:changedtick` value (integer).                                                                                                                                                | `[NUMHI]` (Can be used for cache invalidation or checking if a buffer has changed since last processing for highlights/notes.)                                                                                                  |
| Buffer         | `nvim_buf_get_keymap({buffer}, {mode})` `0.2.1`                                                      | Gets list of buffer-local mappings.                                                                                                                                |                                    | `{buffer}` (integer).<br>`{mode}` (string).                                                                                                                                                                                                                                                                                | Array of maparg()-like dictionaries.                                                                                                                                            | Medium (For introspecting buffer-local keymaps, possibly for the note window)                                                                                                                                                   |
| Buffer         | `nvim_buf_get_lines({buffer}, {start}, {end}, {strict_indexing})` `0.1.0`                            | Gets a line-range from buffer. 0-indexed, end-exclusive. -1 for past-end. Clamps out-of-bounds unless `strict_indexing`.                                           |                                    | `{buffer}` (integer).<br>`{start}` (integer).<br>`{end}` (integer).<br>`{strict_indexing}` (boolean).                                                                                                                                                                                                                      | Array of lines (string), or empty for unloaded buffer.                                                                                                                          | `[NUMHI]` (Essential for reading content from the main buffer for export, or from the note buffer to save its content.)                                                                                                         |
| Buffer         | `nvim_buf_get_mark({buffer}, {name})` `0.1.0`                                                        | Returns `(row,col)` of named mark in buffer. (1,0)-indexed. `v:maxcol` for EOL.                                                                                    |                                    | `{buffer}` (integer).<br>`{name}` (string).                                                                                                                                                                                                                                                                                | `(row, col)` tuple, or `(0,0)` if not set/foreign.                                                                                                                              | Low (NumHi uses extmarks)                                                                                                                                                                                                       |
| Buffer         | `nvim_buf_get_name({buffer})` `0.1.0`                                                                | Gets full file name for the buffer.                                                                                                                                |                                    | `{buffer}` (integer).                                                                                                                                                                                                                                                                                                      | Buffer name (string).                                                                                                                                                           | `[NUMHI]` (Important for associating highlights/notes with a specific file, for persistence (e.g. sidecar file naming), and for the `:NumHiList` display.)                                                                      |
| Buffer         | `nvim_buf_get_offset({buffer}, {index})` `0.3.2`                                                     | Returns byte offset of a 0-indexed line. Line 1 (idx 0) is offset 0. Error for out-of-bounds. -1 for unloaded.                                                     |                                    | `{buffer}` (integer).<br>`{index}` (integer): Line index.                                                                                                                                                                                                                                                                  | Integer byte offset, or -1.                                                                                                                                                     | Medium (For low-level position calculations if needed, but row/col is usually sufficient)                                                                                                                                       |
| Buffer         | `nvim_buf_get_text({buffer}, {start_row}, {start_col}, {end_row}, {end_col}, {opts})` `0.7.0`        | Gets a range from buffer. 0-indexed. Rows end-inclusive, cols end-exclusive. Prefer `nvim_buf_get_lines` for full lines.                                           |                                    | `{buffer}` (integer).<br>`{start_row}` (integer).<br>`{start_col}` (integer).<br>`{end_row}` (integer).<br>`{end_col}` (integer).<br>`{opts}` (dict): Unused.                                                                                                                                                              | Array of lines (string), or empty for unloaded.                                                                                                                                 | `[NUMHI]` (More granular alternative to `nvim_buf_get_lines`, could be useful for extracting precise text for a highlight if needed for export or analysis.)                                                                    |
| Buffer         | `nvim_buf_get_var({buffer}, {name})` `0.1.0`                                                         | Gets a buffer-scoped (b:) variable.                                                                                                                                |                                    | `{buffer}` (integer).<br>`{name}` (string).                                                                                                                                                                                                                                                                                | Variable value.                                                                                                                                                                 | Medium (If NumHi stores state in b:vars)                                                                                                                                                                                        |
| Buffer         | `nvim_buf_is_loaded({buffer})` `0.3.2`                                                               | Checks if a buffer is valid and loaded.                                                                                                                            |                                    | `{buffer}` (integer).                                                                                                                                                                                                                                                                                                      | `true` if valid and loaded, else `false`.                                                                                                                                       | `[NUMHI]` (Important safety check before operating on a buffer, e.g., when applying highlights from a persistent store on buffer load.)                                                                                         |
| Buffer         | `nvim_buf_is_valid({buffer})` `0.1.0`                                                                | Checks if a buffer is valid. (May still be unloaded).                                                                                                              |                                    | `{buffer}` (integer).                                                                                                                                                                                                                                                                                                      | `true` if valid, else `false`.                                                                                                                                                  | `[NUMHI]` (Basic sanity check for buffer handles)                                                                                                                                                                               |
| Buffer         | `nvim_buf_line_count({buffer})` `0.1.0`                                                              | Returns number of lines in buffer.                                                                                                                                 |                                    | `{buffer}` (integer).                                                                                                                                                                                                                                                                                                      | Line count (integer), or 0 for unloaded.                                                                                                                                        | `[NUMHI]` (For range checks, iterating lines, used in `core.lua`.)                                                                                                                                                              |
| Buffer         | `nvim_buf_set_keymap({buffer}, {mode}, {lhs}, {rhs}, {opts})` `0.4.0`                                | Sets a buffer-local mapping.                                                                                                                                       |                                    | `{buffer}` (integer).<br>`{mode}` (string).<br>`{lhs}` (string).<br>`{rhs}` (string).<br>`{opts}` (dict): See `nvim_set_keymap`.                                                                                                                                                                                           | None                                                                                                                                                                            | `[NUMHI]` (Crucial for defining keymaps specific to the note window, e.g., for saving or formatting notes.)                                                                                                                     |
| Buffer         | `nvim_buf_set_lines({buffer}, {start}, {end}, {strict_indexing}, {replacement})` `0.1.0`             | Sets (replaces) a line-range. 0-indexed, end-exclusive. -1 for past-end. Insert if start=end. Delete if replacement empty.                                         | `not textlock`                     | `{buffer}` (integer).<br>`{start}` (integer).<br>`{end}` (integer).<br>`{strict_indexing}` (boolean).<br>`{replacement}` (array of strings).                                                                                                                                                                               | None                                                                                                                                                                            | `[NUMHI]` (Essential for populating and modifying the content of the note buffer. Used in `core.lua` for note editor.)                                                                                                          |
| Buffer         | `nvim_buf_set_mark({buffer}, {name}, {line}, {col}, {opts})` `0.6.0`                                 | Sets a named mark in buffer. (1,0)-indexed. Line 0 deletes mark.                                                                                                   |                                    | `{buffer}` (integer).<br>`{name}` (string).<br>`{line}` (integer).<br>`{col}` (integer).<br>`{opts}` (dict): Reserved.                                                                                                                                                                                                     | `true` if set, else `false`.                                                                                                                                                    | Low (NumHi uses extmarks)                                                                                                                                                                                                       |
| Buffer         | `nvim_buf_set_name({buffer}, {name})` `0.1.0`                                                        | Sets full file name for a buffer.                                                                                                                                  |                                    | `{buffer}` (integer).<br>`{name}` (string).                                                                                                                                                                                                                                                                                | None                                                                                                                                                                            | Medium (Could be used if NumHi creates buffers that need specific naming, e.g., for exported markdown, but less common for the primary annotation buffer)                                                                       |
| Buffer         | `nvim_buf_set_text({buffer}, {start_row}, {start_col}, {end_row}, {end_col}, {replacement})` `0.5.0` | Sets (replaces) a range in buffer. 0-indexed. Rows end-inclusive, cols end-exclusive. Preserves extmarks on non-modified parts of lines.                           | `not textlock`                     | `{buffer}` (integer).<br>`{start_row}` (integer).<br>`{start_col}` (integer).<br>`{end_row}` (integer).<br>`{end_col}` (integer).<br>`{replacement}` (array of strings).                                                                                                                                                   | None                                                                                                                                                                            | `[NUMHI]` (A more precise alternative to `nvim_buf_set_lines`, especially useful if modifications within lines of the note buffer need to be fine-grained.)                                                                     |
| Buffer         | `nvim_buf_set_var({buffer}, {name}, {value})` `0.1.0`                                                | Sets a buffer-scoped (b:) variable.                                                                                                                                |                                    | `{buffer}` (integer).<br>`{name}` (string).<br>`{value}` (any).                                                                                                                                                                                                                                                            | None                                                                                                                                                                            | Medium (If NumHi needs to store temporary state associated with a buffer, e.g., the note buffer's associated highlight ID)                                                                                                      |
| **Extmark**    | `nvim_buf_clear_namespace({buffer}, {ns_id}, {line_start}, {line_end})` `0.3.2`                      | Clears namespaced objects (extmarks) from a region. Lines 0-indexed. `line_end = -1` for entire buffer.                                                            |                                    | `{buffer}` (integer).<br>`{ns_id}` (integer): Namespace ID (-1 for all).<br>`{line_start}` (integer).<br>`{line_end}` (integer).                                                                                                                                                                                           | None                                                                                                                                                                            | `[NUMHI]` (Useful for clearing all NumHi highlights from a buffer or a range, e.g., on plugin disable or explicit clear command.)                                                                                               |
| Extmark        | `nvim_buf_del_extmark({buffer}, {ns_id}, {id})` `0.5.0`                                              | Removes an extmark.                                                                                                                                                |                                    | `{buffer}` (integer).<br>`{ns_id}` (integer).<br>`{id}` (integer): Extmark ID.                                                                                                                                                                                                                                             | `true` if found, else `false`.                                                                                                                                                  | `[NUMHI]` (Core function for removing specific highlights. Used in `core.lua` for erase and undo.)                                                                                                                              |
| Extmark        | `nvim_buf_get_extmark_by_id({buffer}, {ns_id}, {id}, {opts})` `0.5.0`                                | Gets 0-indexed `(row, col)` position of an extmark.                                                                                                                |                                    | `{buffer}` (integer).<br>`{ns_id}` (integer).<br>`{id}` (integer).<br>`{opts}` (dict): `details` (boolean), `hl_name` (boolean, default true).                                                                                                                                                                             | `(row, col)` tuple (integer), or empty list if absent.                                                                                                                          | `[NUMHI]` (Essential for retrieving information about a specific highlight, e.g., to edit its note or jump to it. Used in `core.lua`.)                                                                                          |
| Extmark        | `nvim_buf_get_extmarks({buffer}, {ns_id}, {start}, {end}, {opts})` `0.5.0`                           | Gets extmarks in "traversal order" from a charwise region (0-indexed, inclusive). `start`/`end` can be `(row,col)` or extmark ID. 0 is (0,0), -1 is (-1,-1).       |                                    | `{buffer}` (integer).<br>`{ns_id}` (integer, -1 for all).<br>`{start}` (any).<br>`{end}` (any).<br>`{opts}` (dict): `limit`, `details`, `hl_name`, `overlap`, `type`.                                                                                                                                                      | List of `[extmark_id, row, col]` tuples.                                                                                                                                        | `[NUMHI]` (Fundamental for: finding highlight under cursor, listing all highlights for `:NumHiList`, persistence (saving all highlights), navigation between highlights. Used in `core.lua` for hover and note editing.)        |
| Extmark        | `nvim_buf_set_extmark({buffer}, {ns_id}, {line}, {col}, {opts})` `0.5.0`                             | Creates/updates an extmark. Can specify `id` to update. Optional: `end_row`, `end_col`, `hl_group`, `hl_eol`, `virt_text`, `virt_text_pos`, `sign_text`, etc.      |                                    | `{buffer}` (integer).<br>`{ns_id}` (integer).<br>`{line}` (integer, 0-idx).<br>`{col}` (integer, 0-idx).<br>`{opts}` (dict): Many options for appearance, gravity, persistence. `user_data` can store arbitrary Lua data (though not mentioned in this snippet, it is a common pattern and critical for NumHi notes/tags). | ID of created/updated extmark (integer).                                                                                                                                        | `[NUMHI]` (The **core function** for creating and styling highlights. All NumHi highlight creation and modification will use this. `user_data` on extmarks is vital for storing note IDs/tags. Used extensively in `core.lua`.) |
| Extmark        | `nvim_create_namespace({name})` `0.3.2`                                                              | Creates new or gets existing namespace ID. Empty `name` for anonymous.                                                                                             |                                    | `{name}` (string).                                                                                                                                                                                                                                                                                                         | Namespace ID (integer).                                                                                                                                                         | `[NUMHI]` (Essential for isolating NumHi's highlights from other plugins. NumHi should create its own namespace(s). Used in `core.lua`.)                                                                                        |
| Extmark        | `nvim_get_namespaces()` `0.3.2`                                                                      | Gets existing, non-anonymous namespaces.                                                                                                                           |                                    | None                                                                                                                                                                                                                                                                                                                       | Dict: names to namespace IDs.                                                                                                                                                   | Medium (For introspection or if NumHi needs to interact with other namespaces)                                                                                                                                                  |
| Extmark        | `nvim_set_decoration_provider({ns_id}, {opts})` `0.5.0`                                              | Set/change decoration provider for a namespace. Lua callbacks triggered during redraw (on_start, on_buf, on_win, on_line, on_end). For setting ephemeral extmarks. | `Lua [vim.api] only`               | `{ns_id}` (integer).<br>`{opts}` (table of callbacks).                                                                                                                                                                                                                                                                     | None                                                                                                                                                                            | `[NUMHI]` (Advanced. Could be used for the S-Reader feature for dynamic text display, or highly dynamic temporary visual feedback. The current NumHi features might not require this.)                                          |
| **Window**     | `nvim_win_call({window}, {fun})` `0.5.0`                                                             | Call Lua function with window as temporary current window.                                                                                                         | `Lua [vim.api] only`               | `{window}` (integer: ID, 0 for current).<br>`{fun}` (function).                                                                                                                                                                                                                                                            | Return value of function.                                                                                                                                                       | `[NUMHI]` (Useful for operations within a floating window (note/picker) without globally changing context, e.g., setting options or keymaps locally to the float.)                                                              |
| Window         | `nvim_win_close({window}, {force})` `0.4.0`                                                          | Closes the window.                                                                                                                                                 | `not textlock`                     | `{window}` (integer: ID, 0 for current).<br>`{force}` (boolean): Like `:close!`.                                                                                                                                                                                                                                           | None                                                                                                                                                                            | `[NUMHI]` (Essential for closing NumHi's floating windows (notes, pickers). Used in `core.lua` for note editor.)                                                                                                                |
| Window         | `nvim_win_del_var({window}, {name})` `0.1.0`                                                         | Removes a window-scoped (w:) variable.                                                                                                                             |                                    | `{window}` (integer: ID, 0 for current).<br>`{name}` (string).                                                                                                                                                                                                                                                             | None                                                                                                                                                                            | Medium (If NumHi uses w:vars for float window state)                                                                                                                                                                            |
| Window         | `nvim_win_get_buf({window})` `0.1.0`                                                                 | Gets current buffer in a window.                                                                                                                                   |                                    | `{window}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                   | Buffer ID (integer).                                                                                                                                                            | `[NUMHI]` (To get the buffer associated with a floating note/picker window if needed.)                                                                                                                                          |
| Window         | `nvim_win_get_cursor({window})` `0.1.0`                                                              | Gets (1,0)-indexed, buffer-relative cursor position for a window.                                                                                                  |                                    | `{window}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                   | `(row, col)` tuple.                                                                                                                                                             | `[NUMHI]` (Crucial for getting cursor position to determine what to highlight, where to show hover info, or anchor floating windows. Used extensively in `core.lua` and `init.lua`.)                                            |
| Window         | `nvim_win_get_height({window})` `0.1.0`                                                              | Gets window height in rows.                                                                                                                                        |                                    | `{window}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                   | Height (integer).                                                                                                                                                               | `[NUMHI]` (For calculating dimensions and positions of floating windows relative to other windows or the screen.)                                                                                                               |
| Window         | `nvim_win_get_number({window})` `0.1.0`                                                              | Gets window number.                                                                                                                                                |                                    | `{window}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                   | Window number (integer).                                                                                                                                                        | Medium (Less common than window ID for API usage)                                                                                                                                                                               |
| Window         | `nvim_win_get_position({window})` `0.1.0`                                                            | Gets window position in display cells (0-indexed).                                                                                                                 |                                    | `{window}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                   | `(row, col)` tuple.                                                                                                                                                             | `[NUMHI]` (Useful for positioning floating windows relative to existing windows.)                                                                                                                                               |
| Window         | `nvim_win_get_tabpage({window})` `0.1.0`                                                             | Gets window's tabpage.                                                                                                                                             |                                    | `{window}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                   | Tabpage ID (integer).                                                                                                                                                           | Low                                                                                                                                                                                                                             |
| Window         | `nvim_win_get_var({window}, {name})` `0.1.0`                                                         | Gets a window-scoped (w:) variable.                                                                                                                                |                                    | `{window}` (integer: ID, 0 for current).<br>`{name}` (string).                                                                                                                                                                                                                                                             | Variable value.                                                                                                                                                                 | Medium (If NumHi stores state in w:vars for floating windows)                                                                                                                                                                   |
| Window         | `nvim_win_get_width({window})` `0.1.0`                                                               | Gets window width in columns.                                                                                                                                      |                                    | `{window}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                   | Width (integer).                                                                                                                                                                | `[NUMHI]` (For calculating dimensions and positions of floating windows.)                                                                                                                                                       |
| Window         | `nvim_win_hide({window})` `0.5.0`                                                                    | Closes window and hides buffer (like `:hide`).                                                                                                                     | `not textlock`                     | `{window}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                   | None                                                                                                                                                                            | Medium (Alternative to `nvim_win_close` if specific 'hide' semantics are needed for note buffers)                                                                                                                               |
| Window         | `nvim_win_is_valid({window})` `0.1.0`                                                                | Checks if a window is valid.                                                                                                                                       |                                    | `{window}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                   | `true` if valid, `false` otherwise.                                                                                                                                             | `[NUMHI]` (Important for safety when dealing with floating window IDs, which might be closed by user or plugin. Used in `core.lua`'s note editor.)                                                                              |
| Window         | `nvim_win_set_buf({window}, {buffer})` `0.3.2`                                                       | Sets current buffer in a window, no side effects.                                                                                                                  | `not textlock`                     | `{window}` (integer: ID, 0 for current).<br>`{buffer}` (integer): Buffer ID.                                                                                                                                                                                                                                               | None                                                                                                                                                                            | `[NUMHI]` (To display a note buffer in a floating window. Used in `init.lua` example for `TermHl`, and conceptually for NumHi's note window.)                                                                                   |
| Window         | `nvim_win_set_cursor({window}, {pos})` `0.1.0`                                                       | Sets (1,0)-indexed cursor position in window. Scrolls window if not current.                                                                                       |                                    | `{window}` (integer: ID, 0 for current).<br>`{pos}` (tuple `(row, col)`).                                                                                                                                                                                                                                                  | None                                                                                                                                                                            | `[NUMHI]` (To position cursor in note window, or restore cursor in main window after an operation.)                                                                                                                             |
| Window         | `nvim_win_set_height({window}, {height})` `0.1.0`                                                    | Sets window height.                                                                                                                                                |                                    | `{window}` (integer: ID, 0 for current).<br>`{height}` (integer).                                                                                                                                                                                                                                                          | None                                                                                                                                                                            | `[NUMHI]` (For configuring floating window dimensions.)                                                                                                                                                                         |
| Window         | `nvim_win_set_hl_ns({window}, {ns_id})` `0.8.0`                                                      | Set highlight namespace for a window. Falls back to global (ns=0). Precedes 'winhighlight'.                                                                        |                                    | `{ns_id}` (integer): Namespace ID.                                                                                                                                                                                                                                                                                         | None                                                                                                                                                                            | `[NUMHI]` (If NumHi needs its highlights (defined in its namespace) to apply specifically to certain windows, or to control how its palette interacts with window-specific themes)                                              |
| Window         | `nvim_win_set_var({window}, {name}, {value})` `0.1.0`                                                | Sets a window-scoped (w:) variable.                                                                                                                                |                                    | `{window}` (integer: ID, 0 for current).<br>`{name}` (string).<br>`{value}` (any).                                                                                                                                                                                                                                         | None                                                                                                                                                                            | Medium (If NumHi floating windows need local state stored in w:vars)                                                                                                                                                            |
| Window         | `nvim_win_set_width({window}, {width})` `0.1.0`                                                      | Sets window width (only if screen split vertically).                                                                                                               |                                    | `{window}` (integer: ID, 0 for current).<br>`{width}` (integer).                                                                                                                                                                                                                                                           | None                                                                                                                                                                            | `[NUMHI]` (For configuring floating window dimensions.)                                                                                                                                                                         |
| Window         | `nvim_win_text_height({window}, {opts})` `0.10.0`                                                    | Computes screen lines for a text range in a window, considers folds.                                                                                               |                                    | `{window}` (integer: ID, 0 for current).<br>`{opts}` (dict): `start_row`, `end_row`, `start_vcol`, `end_vcol`, `max_height`.                                                                                                                                                                                               | Dict: `{all, fill, end_row, end_vcol}`.                                                                                                                                         | Medium (Advanced UI calculation, potentially for S-Reader or complex float layouts)                                                                                                                                             |
| **Win Config** | `nvim_open_win({buffer}, {enter}, {config})` `0.4.0`                                                 | Opens new split, floating (if `relative`), or external (if `external`) window. Floats drawn above splits. `width`/`height` required for floats.                    | `not textlock`                     | `{buffer}` (integer).<br>`{enter}` (boolean).<br>`{config}` (dict): `relative`("cursor"                                                                                                                                                                                                                                    | "editor"                                                                                                                                                                        | "win"                                                                                                                                                                                                                           | ...), `win`(ID), `anchor`, `width`, `height`, `bufpos`, `row`, `col`, `focusable`, `external`, `zindex`, `style`("minimal"), `border`, `title`, `noautocmd`, etc.                                                                                                      | Window ID (integer), or 0 on error. | `[NUMHI]` (The **primary function** for creating floating windows for notes and pickers. All NumHi floating UIs will use this. Used in `core.lua`'s note editor.)              |
| Win Config     | `nvim_win_get_config({window})` `0.4.0`                                                              | Gets window configuration. `relative` is empty for normal windows.                                                                                                 |                                    | `{window}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                   | Map defining window config (see `nvim_open_win`).                                                                                                                               | `[NUMHI]` (Useful for inspecting the state of existing floating windows, perhaps to reposition or resize them, or to ensure only one instance of a picker is open.)                                                             |
| Win Config     | `nvim_win_set_config({window}, {config})` `0.4.0`                                                    | Configures window layout. Absent keys unchanged. `row`/`col` and `relative` must be reconfigured together.                                                         |                                    | `{window}` (integer: ID, 0 for current).<br>`{config}` (dict): See `nvim_open_win`.                                                                                                                                                                                                                                        | None                                                                                                                                                                            | `[NUMHI]` (For modifying existing floating windows, e.g., resizing a note window, or changing its border/style dynamically.)                                                                                                    |
| **Tabpage**    | `nvim_tabpage_del_var({tabpage}, {name})` `0.1.0`                                                    | Removes a tab-scoped (t:) variable.                                                                                                                                |                                    | `{tabpage}` (integer: ID, 0 for current).<br>`{name}` (string).                                                                                                                                                                                                                                                            | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| Tabpage        | `nvim_tabpage_get_number({tabpage})` `0.1.0`                                                         | Gets tabpage number.                                                                                                                                               |                                    | `{tabpage}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                  | Tabpage number (integer).                                                                                                                                                       | Low                                                                                                                                                                                                                             |
| Tabpage        | `nvim_tabpage_get_var({tabpage}, {name})` `0.1.0`                                                    | Gets a tab-scoped (t:) variable.                                                                                                                                   |                                    | `{tabpage}` (integer: ID, 0 for current).<br>`{name}` (string).                                                                                                                                                                                                                                                            | Variable value.                                                                                                                                                                 | Low                                                                                                                                                                                                                             |
| Tabpage        | `nvim_tabpage_get_win({tabpage})` `0.1.0`                                                            | Gets current window in a tabpage.                                                                                                                                  |                                    | `{tabpage}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                  | Window ID (integer).                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| Tabpage        | `nvim_tabpage_is_valid({tabpage})` `0.1.0`                                                           | Checks if tabpage is valid.                                                                                                                                        |                                    | `{tabpage}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                  | `true` if valid, `false` otherwise.                                                                                                                                             | Low                                                                                                                                                                                                                             |
| Tabpage        | `nvim_tabpage_list_wins({tabpage})` `0.1.0`                                                          | Gets windows in a tabpage.                                                                                                                                         |                                    | `{tabpage}` (integer: ID, 0 for current).                                                                                                                                                                                                                                                                                  | List of window IDs (integer).                                                                                                                                                   | Low                                                                                                                                                                                                                             |
| Tabpage        | `nvim_tabpage_set_var({tabpage}, {name}, {value})` `0.1.0`                                           | Sets a tab-scoped (t:) variable.                                                                                                                                   |                                    | `{tabpage}` (integer: ID, 0 for current).<br>`{name}` (string).<br>`{value}` (any).                                                                                                                                                                                                                                        | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| Tabpage        | `nvim_tabpage_set_win({tabpage}, {win})` `0.10.0`                                                    | Sets current window in a tabpage.                                                                                                                                  |                                    | `{tabpage}` (integer: ID, 0 for current).<br>`{win}` (integer: ID, must belong to tabpage).                                                                                                                                                                                                                                | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| **Autocmd**    | `nvim_clear_autocmds({opts})` `0.7.0`                                                                | Clears autocommands.                                                                                                                                               |                                    | `{opts}` (dict): `event` (string                                                                                                                                                                                                                                                                                           | table), `pattern` (string                                                                                                                                                       | table), `buffer` (integer), `group` (string                                                                                                                                                                                     | integer).                                                                                                                                                                                                                                                              | None                                | `[NUMHI]` (Useful during plugin setup/teardown to ensure old autocommands are removed before creating new ones, especially if using augroups with `clear=true` is not enough.) |
| Autocmd        | `nvim_create_augroup({name}, {opts})` `0.7.0`                                                        | Create or get an autocommand group ID.                                                                                                                             |                                    | `{name}` (string).<br>`{opts}` (dict): `clear` (boolean, default true).                                                                                                                                                                                                                                                    | Group ID (integer).                                                                                                                                                             | `[NUMHI]` (Essential for organizing NumHi's autocommands, e.g., for hover effects, buffer load/save for persistence. NumHi should use this with `clear=true` in its setup.)                                                     |
| Autocmd        | `nvim_create_autocmd({event}, {opts})` `0.7.0`                                                       | Creates an autocommand. Handler is `callback` (Lua fn/Vim fn name) or `command` (Ex string).                                                                       |                                    | `{event}` (string                                                                                                                                                                                                                                                                                                          | array).<br>`{opts}` (dict): `group`, `pattern`, `buffer`, `desc`, `callback`, `command`, `once`, `nested`. Callback receives table: `id, event, group, file, match, buf, data`. | Autocommand ID (number).                                                                                                                                                                                                        | `[NUMHI]` (Crucial for: implementing hover info (`CursorHold`), loading highlights on buffer enter (`BufReadPost`, `BufWinEnter`), saving highlights (`BufWritePre`), handling note window events (`BufWriteCmd` for saving note). Used in `core.lua` and `init.lua`.) |
| Autocmd        | `nvim_del_augroup_by_id({id})` `0.7.0`                                                               | Deletes an augroup by ID. Also deletes contained autocmds.                                                                                                         |                                    | `{id}` (integer): Group ID.                                                                                                                                                                                                                                                                                                | None                                                                                                                                                                            | Medium (For cleanup if specific augroups need removal outside of `clear=true` on creation)                                                                                                                                      |
| Autocmd        | `nvim_del_augroup_by_name({name})` `0.7.0`                                                           | Deletes an augroup by name. Also deletes contained autocmds.                                                                                                       |                                    | `{name}` (string): Group name.                                                                                                                                                                                                                                                                                             | None                                                                                                                                                                            | Medium                                                                                                                                                                                                                          |
| Autocmd        | `nvim_del_autocmd({id})` `0.7.0`                                                                     | Deletes an autocommand by ID.                                                                                                                                      |                                    | `{id}` (integer): Autocommand ID.                                                                                                                                                                                                                                                                                          | None                                                                                                                                                                            | `[NUMHI]` (If NumHi needs to dynamically manage individual autocommands, e.g., if a callback returns true.)                                                                                                                     |
| Autocmd        | `nvim_exec_autocmds({event}, {opts})` `0.7.0`                                                        | Execute autocommands for event(s) matching opts.                                                                                                                   |                                    | `{event}` (string                                                                                                                                                                                                                                                                                                          | array).<br>`{opts}` (dict): `group`, `pattern`, `buffer`, `modeline`, `data`.                                                                                                   | None                                                                                                                                                                                                                            | Medium (Can be used to manually trigger autocommand groups if needed by NumHi's logic)                                                                                                                                                                                 |
| Autocmd        | `nvim_get_autocmds({opts})` `0.7.0`                                                                  | Get all autocommands matching opts.                                                                                                                                |                                    | `{opts}` (dict): `buffer`, `event`, `id`, `group`, `pattern`.                                                                                                                                                                                                                                                              | Array of autocommand definition tables.                                                                                                                                         | Medium (For introspection or debugging NumHi's autocommands)                                                                                                                                                                    |
| **UI**         | `nvim_ui_attach({width}, {height}, {options})` `0.1.0`                                               | Activates UI events on channel. Entry point for UI clients.                                                                                                        | `[RPC] only`                       | `{width}` (integer).<br>`{height}` (integer).<br>`{options}` (dict: [ui-option] map).                                                                                                                                                                                                                                      | None                                                                                                                                                                            | Low (NumHi is not an external UI)                                                                                                                                                                                               |
| UI             | `nvim_ui_detach()` `0.1.0`                                                                           | Deactivates UI events on channel.                                                                                                                                  | `[RPC] only`                       | None                                                                                                                                                                                                                                                                                                                       | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| UI             | `nvim_ui_pum_set_bounds({width}, {height}, {row}, {col})` `0.5.0`                                    | Tells Nvim geometry of external popupmenu for float alignment.                                                                                                     | `[RPC] only`                       | `{width}` (number).<br>`{height}` (number).<br>`{row}` (number).<br>`{col}` (number).                                                                                                                                                                                                                                      | None                                                                                                                                                                            | Low (NumHi uses its own floating windows, not external PUM)                                                                                                                                                                     |
| UI             | `nvim_ui_pum_set_height({height})` `0.4.0`                                                           | Tells Nvim number of items in PUM for PageUp/Down.                                                                                                                 | `[RPC] only`                       | `{height}` (integer, >0).                                                                                                                                                                                                                                                                                                  | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| UI             | `nvim_ui_set_focus({gained})` `0.9.0`                                                                | Tells Nvim if GUI gained/lost focus.                                                                                                                               | `[RPC] only`                       | `{gained}` (boolean).                                                                                                                                                                                                                                                                                                      | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| UI             | `nvim_ui_set_option({name}, {value})` `0.1.0`                                                        | Sets a UI option.                                                                                                                                                  | `[RPC] only`                       | `{name}` (string).<br>`{value}` (any).                                                                                                                                                                                                                                                                                     | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| UI             | `nvim_ui_term_event({event}, {value})` `0.10.0`                                                      | Tells Nvim of a terminal event (e.g., "termresponse").                                                                                                             | `[RPC] only`                       | `{event}` (string).<br>`{value}` (any).                                                                                                                                                                                                                                                                                    | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| UI             | `nvim_ui_try_resize({width}, {height})` `0.1.0`                                                      | Requests Nvim to resize the screen.                                                                                                                                | `[RPC] only`                       | `{width}` (integer).<br>`{height}` (integer).                                                                                                                                                                                                                                                                              | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |
| UI             | `nvim_ui_try_resize_grid({grid}, {width}, {height})` `0.4.0`                                         | Requests Nvim to resize a grid (for multigrid UIs).                                                                                                                | `[RPC] only`                       | `{grid}` (integer).<br>`{width}` (integer).<br>`{height}` (integer).                                                                                                                                                                                                                                                       | None                                                                                                                                                                            | Low                                                                                                                                                                                                                             |

_(Note: Functions starting with `nvim__` are generally experimental or for internal testing and are omitted unless they have achieved common use or directly address a NumHi feature. The `user_data` field for `nvim_buf_set_extmark` is critical for NumHi to associate arbitrary data (like note content/ID, tags) with a highlight, even though it's not explicitly detailed in the `api.md` parameter list here, it's a known and essential feature of extmarks used by plugins.)_
